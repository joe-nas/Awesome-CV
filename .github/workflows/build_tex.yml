name: Receive Dispatch

on:
  repository_dispatch:
    types: [data-changed]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout joe-nas/Awesome-CV
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.PAT }}
          repository: joe-nas/Awesome-CV

      - name: Checkout joe-nas/cv_automation
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.PAT }}
          repository: joe-nas/cv_automation

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: 3.12.2
  
      - name: Install dependencies
        run: pip install jinja2
      
      - name: Run json_to_tex.py
        run: |
          echo "HALLO"
          python json_to_tex.py
        
      # - name: Move .tex to examples/cv
      #   run: mv output/*.tex examples/cv/